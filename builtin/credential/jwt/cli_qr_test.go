package jwtauth

import (
	"bytes"
	"strings"
	"testing"

	"github.com/stretchr/testify/assert"
)

func TestPrintQR(t *testing.T) {
	b := bytes.Buffer{}
	printQR(&b, "https://auth.url/")

	expectedQR := strings.Join([]string{
		"\033[38;2;255;255;255m\033[48;2;0;0;0m█████████████████████████\033[0m",
		"\033[38;2;255;255;255m\033[48;2;0;0;0m██ ▄▄▄▄▄ █▀ ▀███ ▄▄▄▄▄ ██\033[0m",
		"\033[38;2;255;255;255m\033[48;2;0;0;0m██ █   █ █▄▀  ██ █   █ ██\033[0m",
		"\033[38;2;255;255;255m\033[48;2;0;0;0m██ █▄▄▄█ █ ▄  ██ █▄▄▄█ ██\033[0m",
		"\033[38;2;255;255;255m\033[48;2;0;0;0m██▄▄▄▄▄▄▄█ ▀ █▄█▄▄▄▄▄▄▄██\033[0m",
		"\033[38;2;255;255;255m\033[48;2;0;0;0m██▄▄█▄▀█▄▄██ █ █   █▄▄▀██\033[0m",
		"\033[38;2;255;255;255m\033[48;2;0;0;0m████ █▄ ▄▀ █▀▄ █▀█▀▀▄▀ ██\033[0m",
		"\033[38;2;255;255;255m\033[48;2;0;0;0m██▄▄▄█▄█▄▄▀▄█ ▀██ █▄██▀██\033[0m",
		"\033[38;2;255;255;255m\033[48;2;0;0;0m██ ▄▄▄▄▄ █▄█▄ ▄▄█▀ ▄▄▄███\033[0m",
		"\033[38;2;255;255;255m\033[48;2;0;0;0m██ █   █ █▀▄▀█▀█▀█ ▄█▄ ██\033[0m",
		"\033[38;2;255;255;255m\033[48;2;0;0;0m██ █▄▄▄█ █▀█▄ ▄ ▄█▄█▄█▄██\033[0m",
		"\033[38;2;255;255;255m\033[48;2;0;0;0m██▄▄▄▄▄▄▄█▄▄▄█▄▄▄█▄██▄███\033[0m",
		"\033[38;2;255;255;255m\033[48;2;0;0;0m█████████████████████████\033[0m\n",
	}, "\n")
	assert.Equal(t, expectedQR, b.String())
}
